/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/dt/plugin/CutPaste','sap/ui/dt/OverlayUtil','sap/ui/rta/plugin/Plugin','sap/ui/rta/plugin/RTAElementMover','sap/ui/rta/Utils'],function(q,C,O,P,R,U){"use strict";var a=C.extend("sap.ui.rta.plugin.CutPaste",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{dragStarted:{},elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});U.extendWith(a.prototype,P.prototype,function(d,s,p,D,S){return p!=="getMetadata";});a.prototype.init=function(){C.prototype.init.apply(this,arguments);this.setElementMover(new R({commandFactory:this.getCommandFactory()}));};a.prototype._isEditable=function(o,p){return this.getElementMover().isEditable(o,p.onRegistration)||this._isPasteEditable(o);};a.prototype._isPasteEditable=function(o){var d=o.getDesignTimeMetadata();return this.hasStableId(o)&&this.getElementMover()._isMoveAvailableOnRelevantContainer(o)&&d.isActionAvailableOnAggregations("move");};a.prototype.isAvailable=function(o){return o.getMovable();};a.prototype.registerElementOverlay=function(o){C.prototype.registerElementOverlay.apply(this,arguments);P.prototype.registerElementOverlay.apply(this,arguments);};a.prototype.deregisterElementOverlay=function(o){C.prototype.deregisterElementOverlay.apply(this,arguments);P.prototype.removeFromPluginsList.apply(this,arguments);};a.prototype.paste=function(t){this._executePaste(t);this.fireElementModified({"command":this.getElementMover().buildMoveCommand()});this.stopCutAndPaste();};a.prototype.getMenuItems=function(o){var m=[],c={id:'CTX_CUT',text:sap.ui.getCore().getLibraryResourceBundle('sap.ui.rta').getText('CTX_CUT'),handler:function(b){return this.cut(b[0]);}.bind(this),enabled:function(){return this.getDesignTime().getSelection().length===1;}.bind(this),rank:70},p={id:'CTX_PASTE',text:sap.ui.getCore().getLibraryResourceBundle('sap.ui.rta').getText('CTX_PASTE'),handler:function(b){return this.paste(b[0]);}.bind(this),enabled:function(o){return this.isElementPasteable(o);}.bind(this),rank:80};if(this.isAvailable(o)){m.push(c,p);}else if(this._isPasteEditable(o)){m.push(p);}return m;};return a;},true);

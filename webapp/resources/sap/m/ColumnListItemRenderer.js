/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','./ListItemBaseRenderer','sap/ui/core/Renderer','./ColumnHeader','./Label','sap/ui/core/library','sap/ui/Device','sap/m/library'],function(q,L,R,C,a,c,D,l){"use strict";var P=l.PopinDisplay;var V=c.VerticalAlign;var b=l.PopinLayout;var d=R.extend(L);d.render=function(r,o){var t=o.getTable();if(!t){return;}L.render.apply(this,arguments);if(o.getVisible()&&t.hasPopin()){this.renderPopin(r,o,t);}};d.renderHighlight=function(r,o){r.write('<td class="sapMListTblHighlightCell" aria-hidden="true">');L.renderHighlight.apply(this,arguments);r.write('</td>');};d.renderType=function(r,o){r.write('<td class="sapMListTblNavCol" aria-hidden="true">');L.renderType.apply(this,arguments);r.write('</td>');};d.renderModeContent=function(r,o){r.write('<td class="sapMListTblSelCol" aria-hidden="true">');L.renderModeContent.apply(this,arguments);r.write('</td>');};d.renderCounter=function(r,o){};d.getAriaRole=function(o){return"";};d.renderLIAttributes=function(r,o){r.addClass("sapMListTblRow");var A=o.getVAlign();if(A!=V.Inherit){r.addClass("sapMListTblRow"+A);}var t=o.getTable();if(t&&t.getAlternateRowColors()){var p=t.indexOfItem(o);if(p%2==0){r.addClass("sapMListTblRowAlternate");}}};d.renderLIContentWrapper=function(r,o){var t=o.getTable();if(!t){return;}var e=t.getColumns(true),f=o.getCells();o._destroyClonedHeaders();e.forEach(function(g,i){var h,H,j=true,k=f[g.getInitialOrder()];if(!k||!g.getVisible()||g.isPopin()){g.setIndex(-1);return;}r.write("<td");r.addClass("sapMListTblCell");r.writeAttribute("id",o.getId()+"_cell"+i);if(g){h=g.getStyleClass(true);h&&r.addClass(q.sap.encodeHTML(h));H=g.getHeader();if(H){r.writeAttribute("headers",H.getId());}if(!t.hasPopin()&&g.getMergeDuplicates()){var F=g.getMergeFunctionName(),m=F.split("#"),s=m[1],n=m[0];if(typeof k[n]!="function"){q.sap.log.warning("mergeFunctionName property is defined on "+g+" but this is not function of "+k);}else{var p=g.getLastValue(),u=k[n](s);if(p===u){j=sap.ui.getCore().getConfiguration().getAccessibility();k.addStyleClass("sapMListTblCellDupCnt");r.addClass("sapMListTblCellDup");}else{g.setLastValue(u);}}}g.getVAlign()!="Inherit"&&r.addStyle("vertical-align",g.getVAlign().toLowerCase());var A=g.getCssAlign();if(A){r.addStyle("text-align",A);}r.writeStyles();}r.writeClasses();r.write(">");if(j){this.applyAriaLabelledBy(H,k);r.renderControl(g.applyAlignTo(k));}r.write("</td>");},this);};d.applyAriaLabelledBy=function(h,o){if(o){o.removeAssociation("ariaLabelledBy",o.data("ariaLabelledBy")||undefined,true);}if(h&&h.getText&&o.getAriaLabelledBy&&h.getVisible()){o.addAssociation("ariaLabelledBy",h,true);o.data("ariaLabelledBy",h.getId());}};d.renderPopin=function(r,o,t){o.removePopin();r.write("<tr");r.addClass("sapMListTblSubRow");r.writeElementData(o.getPopin());r.writeAttribute("tabindex","-1");if(o.isSelectable()){r.writeAttribute("aria-selected",o.getSelected());}r.writeClasses();r.write(">");this.renderHighlight(r,o);r.write("<td");r.writeAttribute("id",o.getId()+"-subcell");r.writeAttribute("colspan",t.getColSpan());var p=t.getPopinLayout();if(D.browser.msie||D.browser.edge){p=b.Block;}r.write("><div");r.addClass("sapMListTblSubCnt");r.addClass("sapMListTblSubCnt"+p);r.writeClasses();r.write(">");var e=o.getCells(),f=t.getColumns(true);f.forEach(function(g){if(!g.getVisible()||!g.isPopin()){return;}var h=e[g.getInitialOrder()],H=g.getHeader();if(!H&&!h){return;}var s=g.getStyleClass(),i=g.getPopinDisplay();r.write("<div");r.addClass("sapMListTblSubCntRow");s&&r.addClass(q.sap.encodeHTML(s));r.writeClasses();r.write(">");if(H&&i!=P.WithoutHeader){r.write("<div");r.addClass("sapMListTblSubCntHdr");r.writeClasses();r.write(">");if(H instanceof C){var j=H.getText();H=new a({text:j});}else{H=H.clone();}g.addDependent(H);o._addClonedHeader(H);g.applyAlignTo(H,"Begin");r.renderControl(H);r.write("</div>");r.write("<div class='sapMListTblSubCntSpr'>:</div>");}if(h){r.write("<div");r.addClass("sapMListTblSubCntVal");r.addClass("sapMListTblSubCntVal"+i);r.writeClasses();r.write(">");g.applyAlignTo(h,"Begin");this.applyAriaLabelledBy(H,h);r.renderControl(h);r.write("</div>");}r.write("</div>");},this);r.write("</div></td></tr>");};d.addLegacyOutlineClass=function(r,o){};return d;},true);

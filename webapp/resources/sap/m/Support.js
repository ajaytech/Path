/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/Device','jquery.sap.mobile'],function(q,D){"use strict";var S=(function($,d){var a,s,b,l,t=0,m=3000,h=2,c=3,r=1,o={},e={btnStart:"startE2ETrace",selLevel:"logLevelE2ETrace",taContent:"outputE2ETrace",infoText:"Ent-to-End trace is running in the background."+" Navigate to the URL that you would like to trace."+" The result of the trace will be shown in dialog after the trace is terminated.",infoDuration:5000},f={dvLoadedLibs:"LoadedLibs",dvLoadedModules:"LoadedModules"},w;function g(i,v,B,C,E){i.push("<tr class='sapUiSelectable'><td class='sapUiSupportTechInfoBorder sapUiSelectable'><label class='sapUiSupportLabel sapUiSelectable'>",q.sap.encodeHTML(C),"</label><br>");var F=E;if($.isFunction(E)){F=E(i)||"";}i.push($.sap.encodeHTML(F));i.push("</td></tr>");}function j(B,C,E,F,G){g(B,C,E,F,function(B){B.push("<table class='sapMSupportTable' border='0' cellspacing='5' cellpadding='5' width='100%'><tbody>");$.each(G,function(i,v){var H="";if(v!==undefined&&v!==null){if(typeof(v)=="string"||typeof(v)=="boolean"||($.isArray(v)&&v.length==1)){H=v;}else if(($.isArray(v)||$.isPlainObject(v))&&window.JSON){H=window.JSON.stringify(v);}}g(B,false,false,i,""+H);});B.push("</tbody></table>");});}function k(F){o={version:F.commonInformation.version,build:F.commonInformation.buildTime,change:F.commonInformation.lastChange,useragent:F.commonInformation.userAgent,docmode:F.commonInformation.documentMode,debug:F.commonInformation.debugMode,bootconfig:F.configurationBootstrap,config:F.configurationComputed,loadedlibs:F.loadedLibraries,modules:F.loadedModules,uriparams:F.URLParameters,appurl:F.commonInformation.applicationHREF};var B=["<table class='sapUiSelectable' border='0' cellspacing='5' cellpadding='5' width='100%'><tbody class='sapUiSelectable'>"];g(B,true,true,"SAPUI5 Version",function(i){i.push(o.version," (built at ",o.build,", last change ",o.change,")");});g(B,true,true,"User Agent",function(i){i.push(o.useragent,(o.docmode?", Document Mode '"+o.docmode+"'":""));});g(B,true,true,"Debug Sources",function(i){i.push((o.debug?"ON":"OFF"));});g(B,true,true,"Application",o.appurl);j(B,true,true,"Configuration (bootstrap)",o.bootconfig);j(B,true,true,"Configuration (computed)",o.config);j(B,true,true,"URI Parameters",o.uriparams);g(B,true,true,"End-to-End Trace",function(i){i.push("<label class='sapUiSupportLabel'>Trace Level:</label>","<select id='"+n(e.selLevel)+"' class='sapUiSupportTxtFld' >","<option value='low'>LOW</option>","<option value='medium' selected>MEDIUM</option>","<option value='high'>HIGH</option>","</select>");i.push("<button id='"+n(e.btnStart)+"' class='sapUiSupportBtn'>Start</button>");i.push("<div class='sapUiSupportDiv'>");i.push("<label class='sapUiSupportLabel'>XML Output:</label>");i.push("<textarea id='"+n(e.taContent)+"' class='sapUiSupportTxtArea sapUiSelectable' readonly ></textarea>");i.push("</div>");});g(B,true,true,"Loaded Libraries",function(C){C.push("<ul class='sapUiSelectable'>");$.each(o.loadedlibs,function(i,v){if(v&&(typeof(v)==="string"||typeof(v)==="boolean")){C.push("<li class='sapUiSelectable'>",i+" "+v,"</li>");}});C.push("</ul>");});g(B,true,true,"Loaded Modules",function(i){i.push("<div class='sapUiSupportDiv sapUiSelectable' id='"+n(f.dvLoadedModules)+"'></div>");});B.push("</tbody></table>");return new sap.ui.core.HTML({content:B.join("").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;")});}function n(i){return a.getId()+"-"+i;}function p(v,B){var C="Modules";var E=0,F=[];E=B.length;$.each(B.sort(),function(i,H){F.push(new sap.m.Label({text:" - "+H}).addStyleClass("sapUiSupportPnlLbl"));});var G=new sap.m.Panel({expandable:true,expanded:false,headerToolbar:new sap.m.Toolbar({design:sap.m.ToolbarDesign.Transparent,content:[new sap.m.Label({text:C+" ("+E+")",design:sap.m.LabelDesign.Bold})]}),content:F});G.placeAt(n(v),"only");}function u(){if(a.traceXml){a.$(e.taContent).text(a.traceXml);}if(a.e2eLogLevel){a.$(e.selLevel).val(a.e2eLogLevel);}p(f.dvLoadedModules,o.modules);a.$(e.btnStart).one("tap",function(){a.e2eLogLevel=a.$(e.selLevel).val();a.$(e.btnStart).addClass("sapUiSupportRunningTrace").text("Running...");a.traceXml="";a.$(e.taContent).text("");sap.ui.core.support.trace.E2eTraceLib.start(a.e2eLogLevel,function(i){a.traceXml=i;});sap.m.MessageToast.show(e.infoText,{duration:e.infoDuration});a.close();});}function x(){if(a){return a;}$.sap.require("sap.m.Dialog");$.sap.require("sap.m.Button");$.sap.require("sap.ui.core.HTML");$.sap.require("sap.m.MessageToast");$.sap.require("sap.ui.core.support.trace.E2eTraceLib");a=new sap.m.Dialog({title:"Technical Information",horizontalScrolling:true,verticalScrolling:true,stretch:q.device.is.phone,buttons:[new sap.m.Button({text:"Close",press:function(){a.close();}})],afterOpen:function(){S.off();},afterClose:function(){S.on();}}).addStyleClass("sapMSupport");return a;}function y(E){if(E.touches){var i=E.touches.length;if(D.browser.mobile&&(D.browser.name===D.browser.BROWSER.INTERNET_EXPLORER||D.browser.name===D.browser.BROWSER.EDGE)){w=i;}if(i>c){d.removeEventListener('touchend',z);return;}switch(i){case h:s=Date.now();d.addEventListener('touchend',z);break;case c:if(s){t=Date.now()-s;l=E.touches[i-1].identifier;}break;}}}function z(E){var i=D.browser.mobile&&(D.browser.name===D.browser.BROWSER.INTERNET_EXPLORER||D.browser.name===D.browser.BROWSER.EDGE)&&w==c;d.removeEventListener('touchend',z);if(t>m&&(E.touches.length===h||i)&&E.changedTouches.length===r&&E.changedTouches[0].identifier===l){t=0;s=0;A();}}function A(){sap.ui.require(['sap/ui/core/support/ToolsAPI'],function(T){var i=x();i.removeAllAggregation("content");i.addAggregation("content",k(T.getFrameworkInformation()));a.open();u();});}return({on:function(){if(!b&&"ontouchstart"in d){b=true;d.addEventListener("touchstart",y);}return this;},off:function(){if(b){b=false;d.removeEventListener("touchstart",y);}return this;},open:function(){A();},isEventRegistered:function(){return b;}}).on();}(q,document));return S;},true);
